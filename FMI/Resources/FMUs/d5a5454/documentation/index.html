<html>
  <head>
    <title>StateSpace</title>
    <style>
    body {
        font-family: Helvetica, Arial, Sans-Serif;
        margin: 2em;
    }

    div.container {
        max-width: 750px;
        margin: auto;
    }


    h1, h2 {
        border-bottom: 1px solid #eaecef;
        padding-bottom: .3em;
    }

    pre {
        background-color: #f6f8fa;
        border-radius: 3px;
        font-size: 85%;
        line-height: 1.45;
        overflow: auto;
        padding: 16px;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0;
    }

    th, td {
        font-size: 0.9em;
        border: 1px solid #dfe2e5;
        padding: 6px 13px;
    }
    </style>
  </head>
  <body>
    <div class="container">

      <h1>StateSpace</h1>

<p>The StateSpace model implements the equation</p>

<pre><code>der(x) = Ax + Bu
    y  = Cx + Du
</code></pre>

<p>where</p>

<ul>
<li><code>A</code> is an <code>n</code> by <code>n</code> matrix, where <code>n</code> is the number of states,</li>
<li><code>B</code> is an <code>n</code> by <code>m</code> matrix, where <code>m</code> is the number of inputs,</li>
<li><code>C</code> is an <code>r</code> by <code>n</code> matrix, where <code>r</code> is the number of outputs,</li>
<li><code>D</code> is an <code>r</code> by <code>m</code> matrix, and</li>
<li><code>x0</code> is the initial value of <code>x</code></li>
</ul>

<p><img src="state-space-matrix.svg" width="150"></p>


      <p>with the variables</p>

      <table>
        <thead>
          <tr>
            <th style="text-align:left;">Variable</th>
            <th style="text-align:right;">Start</th>
            <th style="text-align:left;">Unit</th>
            <th>Causality</th>
            <th>Variability</th>
            <th style="text-align:left;">Description</th>
          </tr>
        </thead>
        <tbody>
                  <tr>
            <td style="text-align:left;">time</td>
            <td style="text-align:right;"></td>
            <td style="text-align:left;"></td>
            <td>independent</td>
            <td>continuous</td>
            <td style="text-align:left;">Simulation time</td>
          </tr>
                  <tr>
            <td style="text-align:left;">m</td>
            <td style="text-align:right;">3</td>
            <td style="text-align:left;"></td>
            <td>structuralParameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Number of inputs</td>
          </tr>
                  <tr>
            <td style="text-align:left;">n</td>
            <td style="text-align:right;">3</td>
            <td style="text-align:left;"></td>
            <td>structuralParameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Number of states</td>
          </tr>
                  <tr>
            <td style="text-align:left;">r</td>
            <td style="text-align:right;">3</td>
            <td style="text-align:left;"></td>
            <td>structuralParameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Number of outputs</td>
          </tr>
                  <tr>
            <td style="text-align:left;">A</td>
            <td style="text-align:right;">1 0 0 0 1 0 0 0 1</td>
            <td style="text-align:left;"></td>
            <td>parameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Matrix coefficient A</td>
          </tr>
                  <tr>
            <td style="text-align:left;">B</td>
            <td style="text-align:right;">1 0 0 0 1 0 0 0 1</td>
            <td style="text-align:left;"></td>
            <td>parameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Matrix coefficient B</td>
          </tr>
                  <tr>
            <td style="text-align:left;">C</td>
            <td style="text-align:right;">1 0 0 0 1 0 0 0 1</td>
            <td style="text-align:left;"></td>
            <td>parameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Matrix coefficient C</td>
          </tr>
                  <tr>
            <td style="text-align:left;">D</td>
            <td style="text-align:right;">1 0 0 0 1 0 0 0 1</td>
            <td style="text-align:left;"></td>
            <td>parameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Matrix coefficient D</td>
          </tr>
                  <tr>
            <td style="text-align:left;">x0</td>
            <td style="text-align:right;">0 0 0</td>
            <td style="text-align:left;"></td>
            <td>parameter</td>
            <td>tunable</td>
            <td style="text-align:left;">Initial state vector</td>
          </tr>
                  <tr>
            <td style="text-align:left;">u</td>
            <td style="text-align:right;">1 2 3</td>
            <td style="text-align:left;"></td>
            <td>input</td>
            <td>continuous</td>
            <td style="text-align:left;">Input vector</td>
          </tr>
                  <tr>
            <td style="text-align:left;">y</td>
            <td style="text-align:right;"></td>
            <td style="text-align:left;"></td>
            <td>output</td>
            <td>continuous</td>
            <td style="text-align:left;">Output vector</td>
          </tr>
                  <tr>
            <td style="text-align:left;">x</td>
            <td style="text-align:right;"></td>
            <td style="text-align:left;"></td>
            <td>local</td>
            <td>continuous</td>
            <td style="text-align:left;">State vector</td>
          </tr>
                  <tr>
            <td style="text-align:left;">der(x)</td>
            <td style="text-align:right;"></td>
            <td style="text-align:left;"></td>
            <td>local</td>
            <td>continuous</td>
            <td style="text-align:left;">Derivative of the state vector</td>
          </tr>
                </tbody>
      </table>

      <p>The plot shows the trajectories of the output variables computed with <a href="https://github.com/modelica/Reference-FMUs/">fmusim</a>.</p>

      <pre><code>fmusim --interface-type me --solver cvode --output-interval 1 --output-file StateSpace_out.csv StateSpace.fmu</code></pre>

      <p><img src="result.svg" alt="plot" /></p>

    </div>
  </body>
</html>